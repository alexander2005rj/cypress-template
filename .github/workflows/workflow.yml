name: Workflow

on: push

# on:
#   workflow_call:
#     inputs:
#       BROWSER_CHOICE:
#         type: string
#         required: true
#         default: 'chrome'
        
#   workflow_dispatch:
#       inputs:
#         BROWSER_CHOICE:
#           type: choice
#           description: Selecione o browser a ser executado
#           options:
#             - "chrome"
#           required: true

jobs:
  chrome_tests:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout Test Repository
        uses: actions/checkout@v3

      - name: Setup Chrome
        uses: browser-actions/setup-chrome@v1
        with:
          chrome-version: stable

      - name: Run Chrome Tests
        uses: cypress-io/github-action@v5
        id: headless
        with:
          browser: chrome
          publish-summary: false
      
      - run: |
          {
            echo "### Cypress Results"
            echo "| Result                      | Passed :white_check_mark:               | Failed :x:                              | Pending :hand:                            | Skipped :leftwards_arrow_with_hook:       | Duration :clock:                                    |"
            echo "| --------------------------- | -------------------------               | ----------                              | --------------                            | -----------------------------------       | ----------------                                    |"
            echo "| Passing :white_check_mark:  | {steps.headless.outputs.numOfPassed}}   | ${{steps.headless.outputs.numOfFailed}} | ${{steps.headless.outputs.numOfPending}}  | ${{steps.headless.outputs.numOfSkipped}}  | ${{steps.headless.outputs.durationInMilliseconds}}  |"
          } >> $GITHUB_STEP_SUMMARY

      - name: Set output
        run: echo "{name}={value}" >> $GITHUB_OUTPUT

      # - name: Setup Firefox
      #   uses: browser-actions/setup-firefox@v1
      #   with:
      #     firefox-version: latest
  
      # - name: Run Firefox Tests
      #   uses: cypress-io/github-action@v5
      #   with:
      #     browser: firefox
      #     publish-summary: false

      # - name: Setup Edge
      #   uses: browser-actions/setup-firefox@v1
      #   with:
      #     edge-version: stable
    
      # - name: Run Edge Tests
      #   uses: cypress-io/github-action@v5
      #   with:
      #     browser: edge

      # - name: Setup Webkit
      #   uses: cypress-io/github-action@v5
      #   with:
      #     build: npx playwright install --with-deps webkit
      #     runTests: false

      # - name: Run Webkit Tests
      #   uses: cypress-io/github-action@v5
      #   with:
      #     install: false
      #     start: npx playwright test
      #     browser: webkit

      # - name: Generating Summary Test Results
      #   uses: .github/templates/cypress_summary.yml
    
      # - name: Upload artifacts
      #   if: failure()
      #   uses: actions/upload-artifact@v3
      #   with:
      #     name: Tests Results
      #     path: cypress/report
      #     if-no-files-found: ignore
